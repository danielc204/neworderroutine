
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>סידור שמות</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
    }
    #nameList {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .card {
      background-color: #ffffff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: move;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .index {
      font-weight: bold;
      color: #555;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<h2>סדר את השמות לפי הסדר הרצוי:</h2>
<div id="nameList"></div>

<button onclick="sendOrder()">שלח את הסדר</button>

<script>
  // רשימת שמות לדוגמה (ניתן לשנות או לטעון מבחוץ)
  const names = ["דניאל", "שירה", "יונתן", "נועה", "אדם"];

  const nameList = document.getElementById("nameList");

  function renderList() {
    nameList.innerHTML = '';
    names.forEach((name, idx) => {
      const card = document.createElement("div");
      card.className = "card";
      card.draggable = true;
      card.dataset.index = idx;

      card.innerHTML = `<span class="index">${idx + 1}.</span> ${name}`;

      card.addEventListener("dragstart", dragStart);
      card.addEventListener("dragover", dragOver);
      card.addEventListener("drop", drop);

      nameList.appendChild(card);
    });
  }

  let dragged;

  function dragStart(e) {
    dragged = e.target;
    e.dataTransfer.effectAllowed = "move";
  }

  function dragOver(e) {
    e.preventDefault();
    const target = e.target.closest(".card");
    if (target && target !== dragged) {
      const draggedIndex = [...nameList.children].indexOf(dragged);
      const targetIndex = [...nameList.children].indexOf(target);
      if (draggedIndex < targetIndex) {
        nameList.insertBefore(target, dragged);
      } else {
        nameList.insertBefore(dragged, target);
      }
    }
  }

  function drop(e) {
    e.preventDefault();
    updateNames();
  }

  function updateNames() {
    const cards = nameList.querySelectorAll(".card");
    names.length = 0; // Clear
    cards.forEach(card => {
      const text = card.textContent.replace(/^\d+\.\s*/, "");
      names.push(text);
    });
    renderList();
  }

  function sendOrder() {
    const output = names.map((name, index) => ({
      index: index + 1,
      name: name
    }));

    const json = JSON.stringify(output);
    console.log("סדר חדש:", json);

    // שלח את המידע ל-Thunkable אם צריך
    if (window.ReactNativeWebView) {
      window.ReactNativeWebView.postMessage(json);
    }
  }

  renderList();
</script>

</body>
</html>
